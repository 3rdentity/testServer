<!DOCTYPE html>

<html lang='en'>

  <head>

    <meta charset='utf-8'>
    <meta name='author' content='cactose + shasharala'>
    <meta name='description' content=''>
    <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700,700italic'>
    <link rel='icon' type='image/x-icon' href='http://grappl.io:888/html/grapplicon.ico'>
    <link rel='stylesheet' type='text/css' href='res/vendor/normalize.min.css'>
    <link rel='stylesheet' type='text/css' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css'>
    <link rel='stylesheet' type='text/css' href='res/css/main.css'>
    <title>Grappl - You are the cloud now</title>

  </head>

  <body>

    <!-- Modals
    ===========================================================================
    Placed at the beginning of the document to avoid being affected by other
    components -->
    <div id='modalRegister' class='modal fade'>
      <div class='modal-dialog'>
        <div class='modal-content'>
          <div class='modal-header'>
            <button type='button' class='close' data-dismiss='modal'>&times;</button>
            <h4 class='modal-title'>Register</h4>
          </div>
          <div class='modal-body'>
            <form>
              <input type='text' name='user' placeholder='Username'>
              <br>
              <input type='password' name='pass' placeholder='Password'>
              <br>
              <input type='password' name='pass2' placeholder='Confirm password'>
              <br>
            </form>
          </div>
          <div class='modal-footer'>
            <p hidden></p>
            <button class='btn btn-success' id='submitRegister'>Submit</button>
          </div>
        </div>
      </div>
    </div>

    <div id='modalLogin' class='modal fade'>
      <div class='modal-dialog'>
        <div class='modal-content'>
          <div class='modal-header'>
            <button type='button' class='close' data-dismiss='modal'>&times;</button>
            <h4 class='modal-title'>Login</h4>
          </div>
          <div class='modal-body'>
            <form>
              <input type='text' name='user' placeholder='Username'>
              <br>
              <input type='password' name='pass' placeholder='Password'>
              <br>
            </form>
          </div>
          <div class='modal-footer'>
            <button class='btn btn-success' id='submitLogin'>Submit</button>
          </div>
        </div>
      </div>
    </div>

    <div id='modalLicense' class='modal fade'>
      <div class='modal-dialog'>
        <div class='modal-content'>
          <div class='modal-header'>
            <button type='button' class='close' data-dismiss='modal'>&times;</button>
            <h4 class='modal-title'>License</h4>
          </div>
          <div class='modal-body'>
            <p>Do not use Grappl to transmit any copyrighted material that you do not have the right to transmit.
            <br/>
            Do not use Grappl to do anything illegal.</p>
            <p>You are responsible for what you use this service for.</p>
            <p>There is no uptime guarantee.</p>
            <!--TODO Include shasharala and vendor -->
          </div>
        </div>
      </div>
    </div>

    <!-- Header
    ======================================================================= -->
    <nav class='navbar'>
        <div class='navbar-header'>
          <!--TODO fix toggle not showing-->
          <button type='button' class='navbar-toggle' data-toggle='collapse' data-target='#theNavbar'>
            <span class='icon-bar'></span>
            <span class='icon-bar'></span>
            <span class='icon-bar'></span>
          </button>
          <a class='navbar-brand' href='/'>
            <img id='logo' src='http://grappl.io:888/html/logo.png' alt='grappl logo' />
            <span id='logoTxt'>You are the cloud now</span>
          </a>
        </div>
        <div class='collapse navbar-collapse' id='theNavbar'>
          <ul class='nav navbar-nav navbar-right'>
            <!--TODO fix cursor-->
            <li><a href='/'><span class='glyphicon glyphicon-home'></span> Home</a></li>
            <li><a href='/donate'><span class='glyphicon glyphicon-heart'></span> Donate</a></li>
            <li class='dropdown'>
              <a class='dropdown-toggle' data-toggle='dropdown'>
                <span class='glyphicon glyphicon-download-alt'></span> Download
                <span class='caret'></span>
              </a>
              <ul class='dropdown-menu'>
                <li><a href='http://grappl.io:888/html/GrapplLauncher.exe'>Windows</a></li>
                <li><a href='http://grappl.io:888/html/GrapplLauncher.jar'>Linux &amp; OSX</a></li>
              </ul>
            </li>
            <li class='dropdown'>
              <a class='dropdown-toggle' data-toggle='dropdown'>
                <span class='glyphicon glyphicon-user'></span> Account
                <span class='caret'></span>
              </a>
              <ul class='dropdown-menu'>
                <li><a id='btnRegister'>Register</a></li>
                <li><a id='btnLogin'>Login</a></li>
              </ul>
            </li>
          </ul>
        </div>
    </nav>



    <!-- Content
    ======================================================================= -->
    <div style='background-color: hsla(200, 66%, 49%, 0.55)' class='container'>
      <div class='row'>

        <main class='col-lg-12'>
            <p>
              Grappl is a tool that lets you host virtually any type of server anywhere, with no port forwarding!
              <br/>
              Better yet, it's completely free software, and the client is licensed LGPL v.2.1.
            </p>
            <img src='http://grappl.io:888/html/grapplshot.png'>
            <br/>
            <p>
              How to Run
              <br/>
              Start it.
              <br/>
              Either log in or choose to be anonymous.
              <br/>
              Enter your server's local port number.
              <br/>
              The public address will appear in the grappl window.
            </p>
            <p>
              Download Grappl and get hosting:
              <a href='http://grappl.io:888/html/GrapplLauncher.exe'>Windows</a>
              -
              <a href='http://grappl.io:888/html/GrapplLauncher.jar'>OSX & Linux</a>
            </p>
            <p>
              <a href='/donate'>DONATE to help keep grappl online and free!</a>
            </p>
            <p>
              <a href='/status'>Server Statuses</a>
              ---
              <a href='https://github.com/Cactose/Grappl'>Source</a>
              ---
              <a href='/faq'>Help/FAQ</a>
            </p>
        </main>
      </div>

      <div class='row'>
        <!-- Image Carousel
        =================================================================== -->
        <section id='imgCarousel' class='col-lg-8 carousel slide' data-ride='carousel'>

          <!-- Indicators -->
          <ol class='carousel-indicators'>
            <li data-target='#imgCarousel' data-slide-to='0' class='active'></li>
            <li data-target='#imgCarousel' data-slide-to='1'></li>
            <li data-target='#imgCarousel' data-slide-to='2'></li>
            <li data-target='#imgCarousel' data-slide-to='3'></li>
          </ol>

          <!-- Wrapper for slides -->
          <div class='carousel-inner' role='listbox'>
            <div class='item active'>
              <img src='res/img/normalGUI.png' alt='Normal GUI' width='70%'>
            </div>

            <div class='item'>
              <img src='res/img/console.png' alt='Console' width='100%'>
            </div>

            <div class='item'>
              <img src='res/img/advancedGUI.png' alt='Advanced GUI' width='100%'>
            </div>

            <div class='item'>
              <img src='res/img/httpDebug.png' alt='HTTP Debug' width='100%'>
            </div>
          </div>

          <!-- Left and right controls -->
          <a class='left carousel-control' href='#imgCarousel' role='button' data-slide='prev'>
            <span class='glyphicon glyphicon-chevron-left' aria-hidden='true'></span>
            <span class='sr-only'>Previous</span>
          </a>
          <a class='right carousel-control' href='#imgCarousel' role='button' data-slide='next'>
            <span class='glyphicon glyphicon-chevron-right' aria-hidden='true'></span>
            <span class='sr-only'>Next</span>
          </a>
        </section>

        <!-- Twitter Widget
        =================================================================== -->
        <section class='col-lg-4'>
          <a class='twitter-timeline' href='https://twitter.com/Cactose' data-widget-id='616471055713083392'>Tweets by @Cactose</a>
            <script>
              ! function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0],
                  p = /^http:/.test(d.location) ? 'http' : 'https';
                if (!d.getElementById(id)) {
                  js = d.createElement(s);
                  js.id = id;
                  js.src = p + '://platform.twitter.com/widgets.js';
                  fjs.parentNode.insertBefore(js, fjs);
                }
              }(document, 'script', 'twitter-wjs');
            </script>
        </section>

      </div>
    </div>



    <!-- Footer
    ======================================================================= -->
    <footer>
      <div class='container'>
        <a id='license'>License</a>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <a href='mailto:matt@daexsys.com'>Contact: matt@daexsys.com</a>
      </div>
    </footer>



    <!-- JavaScript
    ===========================================================================
    Placed at the end of the document so the page loads faster -->
    <!-- jQuery CDN Fallback-->
    <script src='https://code.jquery.com/jquery-2.1.4.min.js'></script>
    <script>window.jQuery || document.write('<script src="/res/vendor/jquery-2.1.4.min.js"><\/script>')</script>

    <!-- BootstrapJS CDN Fallback -->
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js'></script>
    <script>window.jQuery.fn.modal || document.write('<script src="/res/vendor/bootstrap-3.3.5-dist/js/bootstrap.min.js"><\/script>')</script>
    <script>
        (function($) {
            $(function() {
              // BootstrapCSS CDN Fallback
                if ($('html').css('font-family') !== 'sans-serif') {
                    $('head').append('<link rel="stylesheet" href="/res/vendor/bootstrap-3.3.5-dist/css/bootstrap.min.css">');
                }
            });
            // Event Listeners
            $('#btnRegister').click(function(){
              $('#modalRegister').modal('show');
            });
            $('#btnLogin').click(function(){
              $('#modalLogin').modal('show');
            });
            $('#license').click(function(){
              $('#modalLicense').modal('show');
            });
            $('#submitRegister').click(function(){
               $.ajax({
                  type: 'POST',
                  url: 'registerhandler',
                  data: $('#modalRegister form').serialize(),
                  success: function(msg){
                    $('#modalRegister p').html(msg)
                      .fadeIn()
                      .delay(3000)
                      .fadeOut();
                  },
                  error: function(){
                    $('#modalRegister p').html('Connection error. Please try again or <a href="mailto:matt@daexsys.com">contact us</a>.')
                      .fadeIn()
                      .delay(3000)
                      .fadeOut();
                  }
                });
            });
            $('#submitLogin').click(function(){
               $.ajax({
                  type: 'POST',
                  url: 'auth',
                  data: $('#modalLogin form').serialize(),
                  success: function(msg){
                    $('#modalLogin p').html(msg)
                      .fadeIn()
                      .delay(1000, function CBLogin() {
                        //TODO set document.cookie and redirect to /account
                      });
                  },
                  error: function(){
                    $('#modalLogin p').html('Connection error. Please try again or <a href="mailto:matt@daexsys.com">contact us</a>.')
                      .fadeIn()
                      .delay(3000)
                      .fadeOut();
                  }
                });
            });
        })(window.jQuery);
    </script>

  </body>

</html>
